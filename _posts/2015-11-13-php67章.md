---
layout: post
title:  "php6、7章"
date:   2014-11-13
categories: php
---


# 第六章 数组及操作

```php
数组是由若干同类型的变量组成的集合
php数组实际上就是一组变量的集合，每个变量都叫做数组的一个元素。
```

### 一维数组

```php
一维数组就是由具有相同数据类型的数据组成的一个表，它由一组键与值对应数据组成。
```

|键|0|1|2|3|....
|---|---|---|---|---|---|
|值|50|25|48|326|....|


### 多维数组

```
多维数组就是以数组为元素的一种特殊数组，最简单的多维数组就是二维数组
```

|键|0|1|2|3
|---|---|---|---|---|---|
|0|50|25|48|326|
|1|43|57|19|36|
|2|53|27|96|43|

## 数组的常用操作

```
数组的常用操作包括数组的创建与调用、数组元素的更新与遍历等
```

### 数组的创建

1、显示创建

```
创建数组是指直接将相关变量赋给同一数组变量的操作
array([mixed])
key可以是int或string类型，value可以是任意值
```

```php
创建一个具有3个元素的一维数组
<?php
//创建一个名为exampleArray的一维数组，item为值，1、2、3为键
$exampleArray = array(0 => "item1", 1 => "item2", 2 => "item3");
echo $exampleArray[0] . "\n";          //输出item1
echo $exampleArray[1] . "\n";          //输出item2
echo $exampleArray[2] . "\n";          //输出item3
?>
返回结果：
item1
item2
item3
```

2、非显示创建

```
非显示创建数组是指通过数组名加方括号的方式来创建数组
如果数组名不存在，则新建一个数组
如果给出方括号没有指定键名，则取当前最大整数索引值，新的键名将是该索引值加1
如果当前没有整数索引，则键名为0
array[index]      //index为指定的键名，
```

```php
采用方括号方式创建一个一维数组
<?php
$exampleArray = array(0 => "item1",1 => "item2");   //采用标准方式创建数组
echo $exampleArray[0] . "\n";                       //输出item1
echo $exampleArray[1] . "\n";                       //输出item2

$exampleArray[2] = "item3";                         //采用方括号方式向数组添加元素item3
print_r($exampleArray);                             //显示整个数组

$exampleArray[ ] = "item4";;                        //向数组添加元素item4，自动产生索引值
print_r($exampleArray);                             //显示整个数组

$exampleArray2[ ] = "item5";                        //向数组添加元素item5
print_r($exampleArray2);                            //显示整个数组
?>
运行结果：
item1
item2
Array
(
    [0] => item1
    [1] => item2
    [2] => item3
)
Array
(
    [0] => item1
    [1] => item2
    [2] => item3
    [3] => item4
)
Array
(
    [0] => item5
)
```

### 数组的调用与删除

```
1、调用数组,通常采用print_r和var_dump调用
array[index]
```

```php
**创建一个2*3的二位数组，并且用2种数组方式输出**
<?php
$planarArray = array("0" => array(0 =>"item1", 1 =>"item2", 2 =>"item3"),"1" => array(0 =>"item4", 1 =>"item5", 2 =>"item6"));
print_r($planarArray);
var_dump($planarArray);
运行结果：
Array
(
    [0] => Array
        (
            [0] => item1
            [1] => item2
            [2] => item3
        )

    [1] => Array
        (
            [0] => item4
            [1] => item5
            [2] => item6
        )

)
array(2) {
  ["0"]=>
  array(3) {
    [0]=>
    string(5) "item1"
    [1]=>
    string(5) "item2"
    [2]=>
    string(5) "item3"
  }
  ["1"]=>
  array(3) {
    [0]=>
    string(5) "item4"
    [1]=>
    string(5) "item5"
    [2]=>
    string(5) "item6"
  }
}
?>
```

转换为二维数组表格

| |0|1|2
|---|---|---|---|---|
|0|item1|item2|item3|
|1|item4|item5|item6|

```
2、数组的删除
void unset (mixed var [, mixed var [, ...]])
```

```php
采用unset删除数组元素和整个数组
<?php
$exampleArray = array("key1" => "item1","item2","item3");
print_r($exampleArray);         //输出整个数组
unset($exampleArray["key1"]);   //删除元素
print_r($exampleArray);
unset($exampleArray);           //删除整个数组
// print_r($exampleArray);      //删掉注释会报错
?>
运行结果:
Array
(
    [key1] => item1
    [0] => item2
    [1] => item3
)
Array
(
    [0] => item2
    [1] => item3
)
```

### 数组更新

```
array(index/key)
```

```php
采用方括号方式对数组元素进行更新
<?php
$exampleArray = array("item1","item2","item3");
$exampleArray[1] = "item";
$exampleArray[2] = "three";
print_r($exampleArray);
?>

运行结果:
Array
(
    [0] => item1
    [1] => item
    [2] => three
)
```

### 数组的遍历

```
foreach仅用于数组
方法一：
foreach (array_expression as $value)              //遍历数组，不读取当前数据单元键名
  statement
方法二：
foreach (array_expression as $key => $value)      //遍历数组，读取当前数组单元键名
  statement
```

```php
**采用两种方式对一个一维数组进行遍历输出**
<?php
$exampleArray = array("item1","item2","item3","item4","item5",);  //创建数组
foreach ($exampleArray as $arrValue) {                            //采用第一种方式遍历
	echo "Value: $arrValue\t";                                     //显示元素值
}
echo "\n";
foreach ($exampleArray as $key => $value) {                      //采用第二种方式遍历数组
	echo "Key: $key; Value: $value\t";                             //显示键值和元素值
}               
?>
运行结果:
Value: item1
Value: item2
Value: item3
Value: item4
Value: item5

Key: 0; Value: item1
Key: 1; Value: item2
Key: 2; Value: item3
Key: 3; Value: item4
Key: 4; Value: item5
```

```php
采用嵌套foreach结构遍历一个3*4的二维数组
<?php
$exampleArray = array("item1"=>array("a", "b","c", "d"),
	2=>array("A","B", "C","D"),
	array("one","two", "three", "four"));            //创建数组

foreach ($exampleArray as $key => $arr) {         //第一次遍历
	echo "$key:\t";    
	foreach ($arr as $value) {                     //第二次遍历
		echo "$value\t";
	}
	echo "\n";
}
?>
运行结果:
item1:  a       b       c       d
2:      A       B       C       D
3:      one     two     three   four
```

## 数组的查找

```
查找方法分为顺序查找、二分法查找
```

### 顺序查找

**逐一比较数组元素的方式来查找给定的元素**

```php
**采用遍历数组顺序查找方式进行查找**
<?php
$exampleArray = array("one","three","two");       //one处于0位，three处于2位，two处于2位
function lookup($array,$key){
        $cnt = count($array);
        //echo $cnt;
        $find = false;
        for($i=0;$i<$cnt;$i++){
                if($array[$i] == $key){
                //echo $array[$i];
                        $find = true;
                        break;
                }
        }
        if($find) return $i;
        else return -1;
}
$result = lookup($exampleArray,"two");
echo $result;
?>
运行结果：
2
```

### 二分法查找

```
对已经安排好的数组进行的一种效率较高的查找方法，每一次查找不成功，都会排除掉二分之一的元素。
重要条件：数组必须是已经排好序的
```

```php
**采用二分法查找特定元素**
<?php
$exampleArray = array(1,2,4,5,8,10);    //创建数组

function lookup($array,$key,$start=0,$end=0){   //自定义二分法查找函数
	if(count($array)!=0 && $end ==0) {
		$end = count($array);
	}
	if($start <= $end){
		$middle = intval(($start+$end)/2);
		if($key==$array[$middle]) return $middle;   //查找成功，返回索引值
		elseif($key < $array[$middle])
			return lookup($array,$key,$start,$middle-1);
		else
			return lookup($array,$key,$middle+1,$end);
	}
	return -1;         //查找失败，返回-1
}

$result = lookup($exampleArray,8);
echo $result . "\n";
?>
运行结果：
4
```

### array_search查找

```
mixed array_search(mixed needle,array haystack [, bool strict]
needle为要查找的值
mixed为needle类型
haystack为要进行查找的数组
array为haystack的类型，即数组类型
strict为查找类型，值为bool类型，为true时，在haystack中查找还将检查needle类型。函数array_search如果查找成功，则返回该值所在的键名，否则返回false。
如果haystack中不止一次出现，则返回第一个匹配的键名
needle是字符串，查找时候会比较大小写，函数查找失败返回false，也可能返回0或"",使用===运算符比较函数的返回值
```

```php
**array_search函数应用**
<?php
$exampleArray = array(15,"a",30,60,"b","C");      //创建数组
echo "15:\t" . array_search(15, $exampleArray) . "\n";    //使用array_search进行搜索
echo "a:\t" . array_search("a", $exampleArray) . "\n";
echo "30:\t" . array_search("30", $exampleArray,true) . "\n";   //此处将严格比较类型，30为int类型，但是"30"为字符串，true为严格比较
echo "60:\t" . array_search(60, $exampleArray,false) . "\n";
echo "30:\t" . array_search(30, $exampleArray,true) . "\n";   //此处也会比较类型
echo "b:\t" . array_search("b", $exampleArray,true) . "\n";
echo "b:\t" . array_search("b", $exampleArray,false) . "\n";
echo "c:\t" . array_search("c", $exampleArray) . "\n";        //字符串查找会比较大小写
echo "C:\t" . array_search("C", $exampleArray,true) . "\n";
echo "C:\t" . array_search("C", $exampleArray,false) . "\n";
?>
运行结果：
15:     0
a:      1
30:
60:     3
30:     2
b:      4
b:      4
c:
C:      5
C:      5
```

## 数组的排序

### 递增排序

```
函数排序成功返回bool true，失败返回bool false
参数array为要排序的数组
sort_flags为排序类型标记
bool sort (array &array [, int sort_flags])
```

```
sort_flags取值的几种方式
+ SORT_REGULAR:正常比较单元（不改变类型）
+ SORT_NUMERIC:单元被作为数字来比较
+ SORT_STRING:单元被作为字符串来比较
SORT_LOCALE_STRING:根据当前local设置把单元当做字符串比较
```

```php
sort函数应用

```
