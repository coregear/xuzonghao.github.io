---
layout: post
title:  "php4、5章"
date:   2014-09-23
categories: php
---


# 第四章 流程控制
## 流程控制
- php执行顺序3种<br />
  + 顺序执行
  + 选择执行
  + 循环执行
    * 条件控制语句:if和switch
    * 循环控制语句:while、do-while、for和foreach
    * 跳转控制语句:break、continue、return

## 条件控制语句
- 根据用户输入或中间变量判断是否符合给定的条件，选择性的执行指定的语句。<br />

### if控制语句
- if语句

```php
if (expr)
    statement
```
  + expr我条件表达式，按照布尔值求值；statement为要执行的语句。如果expr为true，则将执行statement语句，如歌expr表达式值为false，则跳过执行statement语句。<br>

**提示：如果执行的语句为多条时，可以采用大括号将多条语句括起来组成语句组。**

```php
<?php
$a = 80;
if ($a >= 60)
  echo "及格";
?>
```

- if-else语句

```
if (expr)
  statement1
else
  statement2
```
  + expr为true，则执行语句statement1,否则statement2。如果要执行多条采用{}。

**只有一条语句也加上大括号**

```php
<?php
$  = 59;
if ($a >= 60) {
  echo "及格";
} else {
  echo "不及格";
}
?>
```

- if-elseif-else

```
if (expr1)
  statement1
elseif (expr2)
  statement2
else (expr3)
  statement3
```

  + 如果表达式expr1位true，执行statement1;否则判断条件表达式expr2是否为true,如为true,则执行statement2；否则执行语句statement3.

```php
<?php
$a = 80;
if ($a == 100)
{
  echo "满分";
}
Elseif ($a >= 90)
{
  echo "优秀";
}
elseif ($a >= 80)
{
  echo "良好";
}
Elseif ($a >= 60)
{
  echo "及格";
}
else
{
  echo "不及格";
}
?>
```

- 嵌套if语句

```php
<?php
$a = 80;
if ($a >= 60) {
  if ($a == 100) {
    echo "满分";
  } elseif ($a >= 90) {
    echo "优秀";
  } elseif ($a >= 80) {
    echo "良好";
  } else {
    echo "及格";
  }
  } else {
    echo "不及格";
  }
?>
```

### switch分支语句

```
switch (expr) {
  case var1:
    statement1;
    break;
  case var2:
    statement2;
    break;
  default:
    statement3;
}
```

- swithch首先计算表达式expr的值，如表达式expr值与哪一个case相匹配，则执行该case语句后的语句，直到switch程序段结束或遇到第一个break语句为止。case语句的一个特例是default，它匹配了任何其他case语句都不匹配的情况，并且应该是最后一条case语句。

```php
<?php
$a = 80;
switch ($a) {
  case $a == 100:
    echo "满分";
    break;
  case $a >= 90:
    echo "优秀";
    break;
  case $a >= 80:
    echo "良好";
  case $a >= 60:
    echo "及格";
    break;
  default:
    echo "不及格";
}
?>
运行结果
良好及格
```

## 循环控制语句

- while 循环语句

```php
while (expr)    //expr 为true时，就反复执行嵌套语句statement，statement多条采用{}使用
  statement;
```

```php
<?php
$a = 10;
while ($a > 0 ) {
  echo $a . "\n";
  $a--;
}
?>
```
- do-while循环语句

```
do {
  statement;
  while (expr);   //执行循环语句statement，然后判断条件表达式expr，当条件表达式expr为true时进入循环,否则退出
}
```

```php
<?php
$a = 10;
do {
  echo $a . "\n";
  $a--;
  }
while ($a > 0 );
?>
```

- while && do while区别

```
while 在循环时候开始检查，不一定执行一次循环体。
do while 表达式的值每次循环结束时进行检查，至少执行一次循环体。
```

### for 循环语句

```
for (expr1; expr2; expr3)
  statement;
```

-  表达式expr1在循环开始无条件执行一次，expr2在每次循环开始前求值，如果为true，则执行循环体语句statement，否则终止循环。表达式expr3在每次循环结束后求值。每个表达式都可为空，但expr2位空，则会无限循环下去，但可以在循环体内使用break结束循环。

```php
<?php
for ($a = 10; $a > 0; $a--){       //从10开始循环，没一循环减1
  echo $a . "\n";
}
for ($a = 10; $a > 0; ) {         //从10开始循环，在循环体内改变循环条件
  echo $a .  "\n";
  $a--;
}
?>
```

## 跳转语句
**php提供了3种跳转语句：break、continue、return**

### break跳转语句
**注意：break后跟的数字必须在多重（包含2层）循环嵌套内，否则会出现错误**

```php
<?php
for ($a=10; $a>0; $a--){    //使用for语句进行循环
  switch ($a) {
    case 1:                  //当变量为1时，跳出2层循环
      echo $a . "\n";
      break 2;
    case 5:                 //当变量为5时，跳出当前循环
      echo $a . "\n";
      break 1;
    default:                //当变量为其他时不执行任何操作
      break;
  }
}
?>
```

### continue跳转语句
**用于在循环结构中跳过本次循环的剩余代码，并在执行条件为true的时候执行下一次循环**

**contiune和break区别：break是跳出整个循环体，而contiune则是跳出本次循环，并继续向下执行**

```php
<?php
for ($a=10; $a>0; $a--){    //使用for语句进行循环
  switch ($a) {
    case 1:                  //当变量为1时，跳出外层循环并进行下一次循环
      echo $a . "\n";
      continue 2;
    case 5:                 //当变量为5时，跳出当前循环，进行下一次循环
      echo $a . "\n";
      continue 1;
    default:                //当变量为其他时不执行任何操作
      break;
  }
}
?>
```

## 文件包含
### 使用include和include_once包含文件
* include语句
**string为要引用文件名类型为字符串型，filename为要包含的文件，从当前目录include_path开始查找**

```
include(string filename)
```

```php
baohan.php
<?php
$a = 100;
echo "a1:" . $a . "\n";
echo "b1:" . $b . "\n";
include('include.php');
echo "a2:" . $a . "\n";
echo "b2:" . $b . "\n";
?>

include.php
<?php
echo "include a1: " . $a . "\n";
$a = 200;
$b = 400;
echo "include a2: " . $a . "\n";
echo "include b1: " . $b . "\n";
?>

结果：
a1:100
PHP Notice:  Undefined variable: b in /usr/local/apache/htdocs/baohan.php on line 4
b1:
include a1: 100
include a2: 200
include b1: 400
a2:200
b2:400
```

```php
在被包含文件中采用return语句返回值
baohan2.php
<?php
$a = 100;
echo include('include.2.php');
?>

include.2.php
<?php
return $a/2;
?>
```
**在被包含文件中使用return语句来返回值，被包含文件只能是在本地文件中使用**

* include_once语句
**和include区别在于该文件中代码已经被包含，则不会再次包含**

```php
include_once.php
<?php
$a = 100;
echo include('include.3.php');
include('include.4.php');
?>

include.3.php
<?php
function div($var){
	return $var/2;
}
return div($a);
?>

include.4.php
<?php
include ('include.3.php');
echo div($a);
?>
```

**注意：上述程序会报致命错误，如果将include语句改为include_once语句就不会发生报错**

### 使用require和require_once 包含文件
**require不管该包含是否被执行，被包含文件都将被包含进去**

```php
采用require语句包含文件
$a = 100;
if ($a < 0)           //如果变量$a小于0，则包含文件include.3.php
  require('include.3.php');
```

```php
**采用include语句包含文件**
<?php
$a = 100;
if ($a < 0)
  include ('include.3.php');
?>
```

**include和require区别**

```
**包含机制**
include如果包含语句没有被执行，那被包含文件不会被包含进去
require不管包含语句是否被执行，被包含文件都将被包含进去
**错误处理**
include如果找不到被包含文件，则会抛出一个警告信息，程序继续执行
require如果找不到被包含文件，则会抛出一个致命错误，并停止脚步执行。
```

## 实例
**在进行多个条件判断时，虽然可以使用if-else语句进行处理，但是采用switch语句判断更加高效**

```php
<?php
$url = "www.i9soo.com";
switch ($url) {
	case 'www':
		echo "1";
		break;
	case 'i9soo':
		echo "2";
		break;
	case 'com':
		echo "3";
		break;
	default:
		echo "55";
		break;
}
?>
```

**如何进行终止、跳出循环和结束程序的执行**

```php
<?php
//break语句终止循环：
$num = 1;
while ($num < 5) {
	echo "while break:" . $num . "<br />";
	break;
}

//continue语句直接跳到下一次循环：
$num = 1;
while ($num < 5) {
	$num++;
	continue;
	echo "while continue:" . $num . "<br />";		//执行了continue，将不会有任何输出
}

//exit语句停止脚本执行:
$num = 1;
while ($num == 1) {
	echo "exit out:变量num的值:$num";
	exit;
	echo "这条语句不会被输出";
}
?>
```
